services:
  nemo-data-designer:
    # NeMo Data Designer service - update image path based on your NGC access
    # Check available images: https://catalog.ngc.nvidia.com/orgs/nvidia/teams/nemo/containers
    image: nvcr.io/nvidia/nemo:24.07 # Using base NeMo image as fallback
    container_name: nemo-data-designer
    ports:
      - "8080:8080"
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NGC_API_KEY=${NGC_API_KEY}
    runtime: nvidia
    volumes:
      - ./data:/data
      - ./jobs:/jobs
      - ./config:/config
    restart: unless-stopped
    # command: >
    #   bash -c "
    #   echo 'NeMo Data Designer Service Starting...';
    #   echo 'Note: Update docker-compose.yml with the correct image from NGC catalog';
    #   echo 'Visit: https://catalog.ngc.nvidia.com/orgs/nvidia/teams/nemo';
    #   python -m http.server 8080
    #   "
    healthcheck:
      test: [ "CMD", "curl", "-f", "http://localhost:8080/" ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
